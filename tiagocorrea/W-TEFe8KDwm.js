if (self.CavalryLogger) { CavalryLogger.start_js(["u9vEJSx"]); }

__d("MPNBlockedPageComposer.react",["cx","fbt","MessagingPluginContext","MessagingPluginThreadActions","ShimButton.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=i||b("react");function a(){var a=j.useContext(b("MessagingPluginContext"));return j.jsx("div",{className:"_94wl",children:j.jsxs("div",{className:"_94wm",children:[j.jsx("div",{children:h._("Vous avez d\u00e9sactiv\u00e9 les messages pour {pageName}",[h._param("pageName",a.state.pageName)])}),h._("Vous ne pouvez pas envoyer de messages \u00e0 cette personne, et vous ne recevez pas ses messages."),j.jsx(b("ShimButton.react"),{className:"_94wo",onClick:function(){b("MessagingPluginThreadActions").blockOrUnblockPage(a)},children:j.jsx("div",{className:"_94wp",children:h._("Activer les messages")})})]})})}}),null);
__d("LiveChatPluginLikeButtonSVG.react",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){return h.jsx("svg",{height:"24px",preserveAspectRatio:"xMinYMax meet",viewBox:"0 0 40.16 42.24",width:"22px",children:h.jsx("path",{d:"M935.36,1582.44a0,0,0,0,0,0,.06,3.59,3.59,0,0,1-.72,6.53,0,0,0,0,0,0,0,3.56,3.56,0,0,1,.71,2.13,3.6,3.6,0,0,1-3,3.54, 0,0,0,0,0,0,.05,3.56,3.56,0,0,1,.38,1.61,3.61,3.61,0,0,1-3.42,3.6H910v-19.6l5.27-7.9a4,4,0,0,0,.66-2.31l-0.1-4c-0.22-2.4-.09-2.06, 1.13-2.37,2-.51,7.16,1.59,5.13,12.17h11.06A3.59,3.59,0,0,1,935.36,1582.44ZM899,1581h7v22h-7v-22Z",transform:"translate(-898.5 -1563.26)",fill:"none",fillRule:"evenodd",stroke:this.props.threadColor,strokeLinecap:"round",strokeWidth:"2"})})};return b}(h.PureComponent);e.exports=a}),null);
__d("MPNDesktopBotMenuDialog.react",["cx","CometMenu.react","CometMenuItem.react","LiveChatPluginLoggerUtil","MNCommercePostbackCTADataManager","MPNIdentity","MercuryIDs","MessagingPluginContext","URI","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react");a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d){c=a.call(this,c,d)||this;c.state={navigationPath:[]};c.$1=b("LiveChatPluginLoggerUtil").getAttributionTags();c.$2=b("MercuryIDs").getThreadIDFromUserID(c.context.state.pageID);return c}var d=c.prototype;d.render=function(){var a=this,c=[],d=this.props.menuItems;for(var e=0;e<this.state.navigationPath.length;e++){var f=this.state.navigationPath[e];d!=null&&(d=d[f].nested_ctas)}d&&d.map(function(d,b){switch(d.action_type){case 4:a.$3(d,c);break;case 2:a.$4(d,c);break;case 11:a.$5(d,b,c);break;default:c.push({menuItemProps:{primaryText:d.title||""}});break}});return j.jsx("div",{className:"_968x",children:j.jsx(b("CometMenu.react"),{size:"full",withArrow:!0,children:c.map(function(c,a){return j.createElement(b("CometMenuItem.react"),babelHelpers["extends"]({},c.menuItemProps,{key:a}))})})})};d.$4=function(a,c){var d=this.context.state.pageID,e=function(c){(i||(i=b("URI"))).goURIOnNewWindow(a.action_link||"");c=b("MPNIdentity").MPNIdentity.currentUserID();b("gkx")("1874704")?b("LiveChatPluginLoggerUtil").logActionUsingFalco(c,d,b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab","customer_chat_bot_menu_url_redirect_clicked"):b("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",c,d,b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",{action_type:"customer_chat_bot_menu_url_redirect_clicked"})};c.push({menuItemProps:{onClick:e,primaryText:a.title||""}})};d.$5=function(a,b,c){var d=this,e=function(a){d.setState(function(a){return{navigationPath:a.navigationPath.concat(b)}})};c.push({menuItemProps:{onClick:e,primaryText:a.title||""}})};d.$3=function(a,c){var d=this,e=this.context.state.pageID,f=function(c){c=b("MPNIdentity").MPNIdentity.currentUserState();switch(c){case b("MPNIdentity").MPNIdentityState.FB:b("MNCommercePostbackCTADataManager").sendAndConfirm(a.id||"",a.title||"",d.$2,null,null,null,d.$1,null,null,"source:discovery:customer_chat_plugin");break;case b("MPNIdentity").MPNIdentityState.GUEST:var f=d.context.state.messageStore;f=f.sendQueue;if(!f)return;f.enqueueAndSend(a.title||"",f.makePlatformTokenForPostbackCTA(a.id||""));break;default:return}f=b("MPNIdentity").MPNIdentity.currentUserID();b("gkx")("1874704")?b("LiveChatPluginLoggerUtil").logActionUsingFalco(f,e,b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab","customer_chat_bot_menu_postback_clicked"):b("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",f,e,c===b("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",{action_type:"customer_chat_bot_menu_postback_clicked"})};c.push({menuItemProps:{onClick:f,primaryText:a.title||""}})};return c}(j.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopBotMenuButton.react",["cx","fbt","AsyncRequest","BasePopoverTrigger.react","CometPressable.react","LiveChatPluginConstants","LiveChatPluginGuestPersistentMenuQuery","LiveChatPluginLikeButtonSVG.react","LiveChatPluginLoggerUtil","LiveChatPluginSendButtonSVG.react","MPNBotMenuButtonSVG.react","MPNDesktopBotMenuDialog.react","MPNIdentity","MPNLocalState","MPNStorage","MessagingPluginContext","ShimButton.react","XMessengerBotsMenuController","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={menuItems:null},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.state.menuItems==null&&this.$2()};d.componentDidUpdate=function(){this.state.menuItems==null&&this.context.state.accessToken&&this.$2()};d.componentWillUnmount=function(){this.$1&&(this.$1.abort(),this.$1=null),this.setState(this.$3(!1))};d.render=function(){var a=this,c=this.context.state,d=c.hasActiveAutomation,e=c.hasPersistentMenu,f=c.threadCSSColor;if(d||!e||!this.state.menuItems||this.state.menuItems.length===0){c=b("gkx")("1819038");return b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.FB&&c?j.jsx(b("ShimButton.react"),{className:"_4bqf _95jk",onClick:this.props.onLikeClick,children:j.jsx(b("LiveChatPluginLikeButtonSVG.react"),{threadColor:f})}):j.jsx("div",{className:" _95jk _95ms",children:j.jsx(b("LiveChatPluginSendButtonSVG.react"),{threadColor:b("LiveChatPluginConstants").GUEST_SEND_BUTTON_COLOR_EMPTY_INPUT})})}return j.jsx(b("BasePopoverTrigger.react"),{popover:b("MPNDesktopBotMenuDialog.react"),popoverProps:{menuItems:this.state.menuItems},children:function(c,d){return j.jsx("div",{ref:c,children:j.jsx("div",{className:"_94vq"+(b("gkx")("2008125")?" _9r2w":""),children:j.jsx(b("CometPressable.react"),{overlayRadius:50,"aria-label":h._("Menu fixe"),onPress:function(){a.$4(),d()},children:j.jsx(b("MPNBotMenuButtonSVG.react"),{threadColor:f})})})})}})};d.$2=function(){var a=this,c=this.context,d=c.state,e=c.dispatchAction;c=d.pageID;d=b("MPNStorage").getFBStorageState();if(!d||d.chatState===b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED)return;d=b("MPNIdentity").MPNIdentity.currentUserState();switch(d){case b("MPNIdentity").MPNIdentityState.GUEST:d=(d=b("MPNIdentity").MPNIdentity.currentUser())==null?void 0:d.accessToken;if(d==null)return;b("LiveChatPluginGuestPersistentMenuQuery").fetch(c,d,function(b){b!=null&&b.length>0?(a.setState({menuItems:b}),e({type:"TOGGLE_HAS_PERSISTENT_MENU",hasPersistentMenu:!0})):(a.setState({menuItems:[]}),e({type:"TOGGLE_HAS_PERSISTENT_MENU",hasPersistentMenu:!1}))});break;case b("MPNIdentity").MPNIdentityState.FB:d=b("XMessengerBotsMenuController").getURIBuilder().setString("page_id",c).setBool("should_flatten",!0).getURI();this.$1=new(b("AsyncRequest"))().setURI(d).setHandler(function(b){a.setState({menuItems:b.payload.menu})}).setErrorHandler(function(b){a.setState({menuItems:[]})});this.$1.send();break;default:return}};d.$4=function(){this.setState(this.$3(!0)),this.props.onClick()};d.$3=function(a){var c=this.context.state.pageID,d=b("MPNIdentity").MPNIdentity.currentUserID();b("gkx")("1874704")?b("LiveChatPluginLoggerUtil").logActionUsingFalco(d,c,b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",a?"customer_chat_bot_menu_opened":"customer_chat_bot_menu_closed"):b("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",d,c,b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",{action_type:a?"customer_chat_bot_menu_opened":"customer_chat_bot_menu_closed"})};return c}(j.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MessagingPluginDesktopProfilePicture.react",["cx","Image.react","MessagingPluginContext","PrivacyTransparentOverlay.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.context.state,c=a.pageProfilePictureUri;a=a.isBusinessActive;var d=this.props,e=d.className;d=d.greenDotSize;d=d==="large"?"_95lb _97p-":"_95lb _97ot";return i.jsxs(b("PrivacyTransparentOverlay.react"),{children:[i.jsx(b("Image.react"),{className:(e=e)!=null?e:"_95la",src:c}),a?i.jsx("div",{className:d}):null]})};return c}(i.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MessagingPluginDesktopThreadMenu.react",["cx","fbt","CometMenu.react","CometMenuItem.react","CometSeparatorMenuItem.react","MPNIdentity","MessagingPluginContext","MessagingPluginThreadActions","ODS","URI","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j,k=i||b("react");function a(a){var c,d=k.useContext(b("MessagingPluginContext")),e=d.state,f=e.pageID,g=e.isPageBlocked,i=e.locale,l=e.showUpgradeUpsellPrompt,m=e.isPageInEU;e=e.isLightswitchEnabledForGuest;var n=b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.GUEST,o=!0;c=(c=d.state.threadExists)!=null?c:!1;!n?o=b("gkx")("1830721"):o=e!==!0;o=o&&!m&&c;o||(n&&e===!0&&b("ODS").bumpEntityKey(4205,"chat_plugin","chat_plugin.epd.guest_frx_entry_point_blocked_eu_guest"),!n&&!b("gkx")("1830721")&&b("ODS").bumpEntityKey(4205,"chat_plugin","chat_plugin.epd.guest_frx_entry_point_blocked_eu_fb_user"),m&&b("ODS").bumpEntityKey(4205,"chat_plugin","chat_plugin.epd.guest_frx_entry_point_blocked_eu_page"));return k.jsx("div",{className:"_968x",children:k.jsxs(b("CometMenu.react"),{size:"full",withArrow:!0,children:[n&&l?k.jsx(b("CometMenuItem.react"),{icon:{src:"/images/web_messenger/app-messenger_32-4x.png",style:"square"},iconStyle:"normal",onClick:function(){return a.onUpgrade()},primaryText:h._("Poursuivre dans Messenger")}):null,k.jsx(b("CometMenuItem.react"),{icon:{src:"/images/web_messenger/cross-circle_32-4x.png",style:"square"},onClick:function(){d.dispatchAction({type:"TOGGLE_END_CHAT",showEndChat:!0})},primaryText:h._("Terminer la discussion")}),!n&&g!=null?k.jsx(b("CometMenuItem.react"),{icon:{src:"/images/web_messenger/message-cross_32-4x.png",style:"square"},iconStyle:"normal",onClick:function(){b("MessagingPluginThreadActions").blockOrUnblockPage(d)},primaryText:g?h._("Activer les messages"):h._("D\u00e9sactiver les messages")}):null,n?null:k.jsx(b("CometMenuItem.react"),{icon:a.isMuted?{src:"/images/web_messenger/bell-cross_32-4x.png",style:"square"}:{src:"/images/web_messenger/bell_32-4x.png",style:"square"},iconStyle:"normal",onClick:a.onClickMuteOrUnmute,primaryText:a.isMuted?h._("Reprendre la conversation"):h._("Mettre la conversation en sourdine")}),o?k.jsx(b("CometMenuItem.react"),{icon:{src:"/images/web_messenger/caution-triangle_32-4x.png",style:"square"},iconStyle:"normal",onClick:function(){b("MessagingPluginThreadActions").openFRXPrompt(f,i)},primaryText:h._("Une erreur s\u2019est produite")}):null,k.jsx(b("CometSeparatorMenuItem.react"),{}),k.jsx(b("CometMenuItem.react"),{onClick:function(){(j||(j=b("URI"))).goURIOnNewWindow("https://www.facebook.com/"+f)},primaryText:h._("Visiter la Page Facebook")}),k.jsx(b("CometMenuItem.react"),{onClick:function(){(j||(j=b("URI"))).goURIOnNewWindow("https://www.facebook.com/business/m/add-messenger-to-your-website")},primaryText:h._("Ajouter Messenger \u00e0 votre site web.")})]})})}}),null);
__d("MPNDesktopDialogHeader.react",["cx","fbt","Arbiter","BasePopoverTrigger.react","FlexLayout.react","LineClamp.react","LiveChatPluginLoggerUtil","MPNConstants","MPNHeaderActionButton.react","MPNMinusButtonSVG.react","MPNMoreInfoButtonSVG.react","MPNVerifiedBadge.react","MessagingPluginContext","MessagingPluginDesktopProfilePicture.react","MessagingPluginDesktopThreadMenu.react","MessagingPluginThreadActions","gkx","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||b("react");(j||(j=b("stylex"))).inject(".qmqpeqxj{border-top-left-radius:50%}",1,".qmqpeqxj{border-top-right-radius:50%}");j.inject(".e7u6y3za{border-top-right-radius:50%}",1,".e7u6y3za{border-top-left-radius:50%}");j.inject(".qwcclf47{border-bottom-right-radius:50%}",1,".qwcclf47{border-bottom-left-radius:50%}");j.inject(".nmlomj2f{border-bottom-left-radius:50%}",1,".nmlomj2f{border-bottom-right-radius:50%}");j.inject(".hpj0pwwo{font-size:1.0625rem}",1);j.inject(".igjjae4c{font-weight:bold}",1);j.inject(".frx9we7d{word-break:break-all}",1);j.inject(".mov749r8{color:var(--fds-black-alpha-50)}",1);j.inject(".nfkogyam{font-size:0.8125rem}",1);j.inject(".lcfup58g{padding-left:4px}",1,".lcfup58g{padding-right:4px}");j.inject(".om3e55n1{position:relative}",1);j.inject(".iy1nols1{top:-1px}",1);a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=null,d.state={isMuted:d.context.state.isMuted},d.$3=function(){var a=d.context.state,c=a.guestID;a=a.pageID;d.$1=b("MessagingPluginThreadActions").launchUpgradeFlowDesktop(d.context,d.props.history,b("MPNConstants").MPNUpgradePrompt.CONTINUE_IN_MESSENGER);b("gkx")("1874704")?b("LiveChatPluginLoggerUtil").logActionUsingFalco(c,a,"guest_chat_tab",b("MPNConstants").MPNUpgradePrompt.CONTINUE_IN_MESSENGER):b("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",c,a,"guest_chat_tab",{action_type:b("MPNConstants").MPNUpgradePrompt.CONTINUE_IN_MESSENGER})},d.$2=function(){var a=d.state.isMuted;b("MessagingPluginThreadActions").muteOrUnmutePage(d.context.state.pageID,a);d.setState({isMuted:!a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentWillUnmount=function(){this.$1&&b("Arbiter").unsubscribe(this.$1)};d.render=function(){var a=this,c=this.context.state,d=c.pageName;c=c.pageVerifiedStatus;var e=this.props.menuEnabled!==!1,f=this.context.state.optimisticStorageState.showUpgradePrompt!=null&&this.context.state.optimisticStorageState.showUpgradePrompt!==b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN;return k.jsxs("div",{className:"_9dxj"+(f?"":" _9gop"),children:[k.jsx("div",{className:"nmlomj2f qwcclf47 e7u6y3za qmqpeqxj",children:k.jsx(b("MessagingPluginDesktopProfilePicture.react"),{})}),k.jsxs("div",{className:"_9dxi",children:[k.jsxs(b("FlexLayout.react"),{align:"center",children:[k.jsx(b("LineClamp.react"),{className:"frx9we7d igjjae4c hpj0pwwo",lines:1,children:k.jsx("strong",{children:d})}),c&&c!=="not_verified"?k.jsx("span",{className:"iy1nols1 om3e55n1 lcfup58g",children:k.jsx(b("MPNVerifiedBadge.react"),{verificationStatus:c,size:14})}):null]}),k.jsx(b("LineClamp.react"),{className:"nfkogyam mov749r8",lines:1,children:h._("Un service Messenger")})]}),k.jsx("div",{className:"_9dxh"}),k.jsxs("div",{className:"_9dzn",children:[e&&k.jsx(b("BasePopoverTrigger.react"),{popover:b("MessagingPluginDesktopThreadMenu.react"),popoverProps:{history:this.props.history,isMuted:this.state.isMuted,onClickMuteOrUnmute:this.$2,onUpgrade:this.$3},children:function(a,c){return k.jsx("div",{className:b("gkx")("2008125")?"_9r2w":"",ref:a,children:k.jsx(b("MPNHeaderActionButton.react"),{label:h._("Plus"),onPress:c,children:k.jsx(b("MPNMoreInfoButtonSVG.react"),{})})})}}),k.jsx(b("MPNHeaderActionButton.react"),{label:h._("fermer"),onPress:function(){var b;return(b=a.props.ActionDelegate)==null?void 0:b.minimize()},children:k.jsx(b("MPNMinusButtonSVG.react"),{})})]})]})};return c}(k.PureComponent);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopGuestAttachmentButton.react",["cx","MPNConstants","MPNPaperclipIconSVG.react","MPNStorage","MessagingPluginContext","ShimButton.react","Tooltip.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.context.dispatchAction;return i.jsx(b("Tooltip.react"),{tooltip:"Attach Files",children:i.jsx(b("ShimButton.react"),{"data-testid":void 0,className:"_95jj _9jru",onClick:function(){b("MPNStorage").setShowUpgradePrompt(b("MPNConstants").MPNUpgradePrompt.ATTACHMENT_UPSELL),a({type:"UPDATE_UPGRADE_UPSELL_PROMPT",upgradeUpsellPrompt:b("MPNConstants").MPNUpgradePrompt.ATTACHMENT_UPSELL})},children:i.jsx(b("MPNPaperclipIconSVG.react"),{color:this.context.state.threadCSSColor})})})};return c}(i.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopGuestUpgradeUpsellPrompt.react",["cx","fbt","ix","Arbiter","ChatPluginMessengerBlurpleLogoSVG.react","Image.react","LiveChatPluginLoggerUtil","LiveChatPluginPromptButton.react","MPNConstants","MPNGuestUpgradeFBTStrings","MPNStorage","MessagingPluginContext","MessagingPluginThreadActions","gkx","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||b("react");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentWillUnmount=function(){this.$1&&b("Arbiter").unsubscribe(this.$1)};d.componentDidMount=function(){var a=this.context.state,c=a.pageID;a=a.guestID;b("gkx")("1877511")?b("LiveChatPluginLoggerUtil").logImpressionUsingFalco(c,"upgrade_prompt",null,null,null,null,a,null,this.props.prompt):b("LiveChatPluginLoggerUtil").logImpressionFromNewUI("tab_impression",c,"upgrade_prompt",null,null,null,null,null,a,{prompt_type:this.props.prompt})};d.render=function(){var a=this,c=this.props.prompt,d=b("MPNGuestUpgradeFBTStrings").getPromptTitle(c,this.context),e=b("MPNGuestUpgradeFBTStrings").getPromptSubtitle(c,this.context),f=b("gkx")("1740404");f=f?k.jsx(b("ChatPluginMessengerBlurpleLogoSVG.react"),{height:24,width:24}):k.jsx(b("Image.react"),{className:"messengerIcon",src:i("1273954")});return k.jsxs("div",{className:"_95to _9j_q",children:[k.jsxs("div",{className:"promptHeaderContainer",children:[k.jsx("div",{className:"_95tx",children:f}),k.jsxs("div",{className:"_95tr",children:[k.jsx("div",{className:"_95ty",children:d}),k.jsx("div",{className:"_95tz",children:e})]})]}),k.jsxs("div",{className:"promptFooterContainer",children:[k.jsx("div",{className:"dismissButton footerButton",children:k.jsx(b("LiveChatPluginPromptButton.react"),{color:"rgba(0, 0, 0, .05)",hasIcon:!1,onClick:function(){b("MPNStorage").setShowUpgradePrompt(b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN),a.$2()},text:h._("Plus tard")})}),k.jsx("div",{className:"continueButton footerButton",children:k.jsx(b("LiveChatPluginPromptButton.react"),{color:this.props.color,hasIcon:!0,onClick:function(){a.$1=b("MessagingPluginThreadActions").launchUpgradeFlowDesktop(a.context,a.props.history,c),a.$3()},text:h._("Continuer")})})]})]})};d.$3=function(){var a=this.context.state,c=a.guestID;a=a.pageID;b("LiveChatPluginLoggerUtil").logActionFromNewUI("tab_click",c,a,"upgrade_prompt",{button_name:"upgrade_prompt_continue",prompt_type:this.props.prompt})};d.$2=function(){var a=this.context,c=a.dispatchAction;a=a.state;var d=a.guestID;a=a.pageID;c({type:"UPDATE_UPGRADE_UPSELL_PROMPT",upgradeUpsellPrompt:b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN});b("LiveChatPluginLoggerUtil").logActionFromNewUI("tab_click",d,a,"upgrade_prompt",{button_name:"upgrade_prompt_not_now",prompt_type:this.props.prompt})};return c}(k.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("EllipsisText.react",["cx","DOMContainer.react","joinClasses","react"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=h||b("react");function a(a){var c=a.children instanceof Node?i.jsx(b("DOMContainer.react"),{children:a.children}):a.children;return i.jsx("span",{id:a.id,className:b("joinClasses")(a.className,"_6i6a"),children:c})}}),null);
__d("MPNDesktopSwitchAccountMenu.react",["cx","fbt","CometMenu.react","CometMenuItem.react","MessagingPluginContext","MessagingPluginThreadActions","react"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=i||b("react");function a(a){var c=j.useContext(b("MessagingPluginContext"));return j.jsx("div",{"data-testid":void 0,className:"_968x",children:j.jsx(b("CometMenu.react"),{size:"normal",withArrow:!0,children:j.jsx(b("CometMenuItem.react"),{onClick:function(){b("MessagingPluginThreadActions").switchAccount(c)},primaryText:h._("Changer de compte")})})})}}),null);
__d("MessagingPluginDesktopInformationMenu.react",["cx","fbt","CometMenu.react","CometMenuItem.react","MessagingPluginContext","URI","react"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j,k=i||b("react");function a(a){a=k.useContext(b("MessagingPluginContext"));var c=a.state.pageID;return k.jsx("div",{"data-testid":void 0,className:"_968x",children:k.jsxs(b("CometMenu.react"),{size:"full",withArrow:!0,children:[k.jsx(b("CometMenuItem.react"),{onClick:function(){(j||(j=b("URI"))).goURIOnNewWindow("https://www.facebook.com/"+c)},primaryText:h._("Visiter la Page Facebook")}),k.jsx(b("CometMenuItem.react"),{onClick:function(){(j||(j=b("URI"))).goURIOnNewWindow("https://www.facebook.com/business/m/add-messenger-to-your-website")},primaryText:h._("Ajouter Messenger \u00e0 votre site web.")})]})})}}),null);
__d("XChatPluginDesktopIncognitoLoginPopupController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/plugins/chat/incognito_login/",{})}),null);
__d("MPNDesktopWelcomePageModalView.react",["cx","fbt","ix","BasePopoverTrigger.react","ChatPluginSetupFlowE2ETestUtils","CometLink.react","CometPressable.react","EllipsisText.react","FlexLayout.react","Image.react","LineClamp.react","LiveChatPluginConstants","LiveChatPluginFbts","LiveChatPluginLoggerUtil","MPNConstants","MPNDesktopSwitchAccountDropDownMenu.react","MPNDesktopSwitchAccountMenu.react","MPNHeaderActionButton.react","MPNIdentity","MPNLocalState","MPNMessengerIconSVG.react","MPNMinusButtonSVG.react","MPNMoreInfoButtonSVG.react","MPNNavigation","MPNStorage","MPNVerifiedBadge.react","MPNXDMessageManager","MessagingPluginContext","MessagingPluginDesktopInformationDropDownMenu.react","MessagingPluginDesktopInformationMenu.react","MessagingPluginDesktopProfilePicture.react","PluginOptin","PopupWindow","ReactDOM","ShimButton.react","XChatPluginDesktopIncognitoLoginPopupController","XCookiesPolicyControllerRouteBuilder","XDataPolicyController","XTermsController","gkx","performanceAbsoluteNow","react","stylex"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=j||b("react");(k||(k=b("stylex"))).inject(".lcfup58g{padding-left:4px}",1,".lcfup58g{padding-right:4px}");var n=250;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.modalSheetRef=m.createRef(),d.$7=function(){var a=d.context,c=a.state,e=a.dispatchAction;a=c.pageID;var f=c.hasGuestMode,g=c.pagePassesSentryTest;c=c.hasMessagingPermission;var h=b("MPNIdentity").MPNIdentity.currentUserState(),i=b("MPNIdentity").MPNIdentity.currentUserID();e({type:"UPDATE_CONTINUE_CLICK_TIME",continueClickTime:(l||(l=b("performanceAbsoluteNow")))()});if(h==b("MPNIdentity").MPNIdentityState.FB&&i!=null){if(!g&&!c){(h=d.props.ActionDelegate)==null?void 0:h.openThreadWithInterstitial(function(){var a;(a=d.props.ActionDelegate)==null?void 0:a.openThreadWithCurrentFBUser();b("MPNNavigation").navigateToRoute(d.props.history,b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW);e({type:"UPDATE_BLOCK_STATUS",isPageBlocked:!1})});return}b("MPNNavigation").navigateToRoute(d.props.history,b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW);(i=d.props.ActionDelegate)==null?void 0:i.openThreadWithCurrentFBUser();b("LiveChatPluginLoggerUtil").logActionFromNewUI("tab_click",null,a,f?"welcome_page_with_guest_option":"welcome_page",{button_name:"continue_as"});return}b("MPNIdentity").MPNIdentity.performUIAction(function(){if(b("MPNIdentity").MPNIdentity.cookieUserUncached()!="0")return;b("MPNIdentity").MPNIdentity.subscribeLoggedInUserChanges(function(a,c){a=b("MPNStorage").getFBStorageState();if(a!=null){b("MPNStorage").setFBStorageState(babelHelpers["extends"]({},a,{chatState:b("MPNLocalState").MPNChatState.LOGGED_IN_CHAT_STARTED,rdr:b("MPNConstants").MPNRedirect.FB_LOG_IN}));c={path:b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW,chatState:b("MPNLocalState").MPNChatState.LOGGED_IN_CHAT_STARTED,visibility:"not-hidden"};b("MPNStorage").setThirdPartyStorageState(c)}},n);d.$8(!1,!1)},function(){if(b("MPNIdentity").MPNIdentity.cookieUserUncached()!="0"){b("MPNXDMessageManager").reloadPlugin();return}b("MPNIdentity").MPNIdentity.subscribeLoggedInUserChanges(function(a,c){a=b("MPNStorage").getFBStorageState();a!=null&&b("MPNStorage").setFBStorageState(babelHelpers["extends"]({},a,{chatState:b("MPNLocalState").MPNChatState.LOGGED_IN_CHAT_STARTED,rdr:b("MPNConstants").MPNRedirect.FB_LOG_IN}))},n);d.$8(!1,!1)},function(){var a=b("XChatPluginDesktopIncognitoLoginPopupController").getURIBuilder().getURI();b("PopupWindow").open(a.toString(),420,450)});b("LiveChatPluginLoggerUtil").logActionFromNewUI("tab_click",null,a,f?"welcome_page_with_guest_option":"welcome_page",{button_name:"log_in_messenger"})},d.$6=function(){var a=d.context,c=a.state;a=a.dispatchAction;c=c.pageID;a({type:"UPDATE_CONTINUE_CLICK_TIME",continueClickTime:(l||(l=b("performanceAbsoluteNow")))()});b("MPNIdentity").MPNIdentity.performUIAction(d.$9,function(){var a=b("MPNStorage").getFBStorageState();a==null?a={requestID:b("MPNStorage").requestID,currentPath:b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW,userID:"0",chatState:b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED,visibility:"not-hidden",showUpgradePrompt:b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN,accessToken:null,expirationTimestamp:null,rdr:b("MPNConstants").MPNRedirect.NEW_GUEST_SESSION}:a=babelHelpers["extends"]({},a,{chatState:b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED,rdr:"new_guest_sess"});b("MPNStorage").setFBStorageState(a);b("MPNXDMessageManager").reloadPlugin()},function(){var a=d.context.dispatchAction;a({type:"UPDATE_COOKIE_ACCESS_DENIED",cookieAccessDenied:!0});d.$9()});b("LiveChatPluginLoggerUtil").logActionFromNewUI("tab_click",null,c,"welcome_page_with_guest_option",{button_name:"continue_as_guest"})},d.$9=function(){b("MPNNavigation").navigateToRoute(d.props.history,b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW),d.props.ActionDelegate&&d.props.ActionDelegate.onContinueAsGuest(function(){})},d.$10=function(){var a=d.context,c=a.state;a=a.dispatchAction;c=c.pageID;a({type:"UPDATE_CONTINUE_CLICK_TIME",continueClickTime:(l||(l=b("performanceAbsoluteNow")))()});b("MPNIdentity").MPNIdentity.performUIAction(function(){b("MPNNavigation").navigateToRoute(d.props.history,b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW)},function(){b("MPNIdentity").MPNIdentity.clearUserChangesSubscription(),b("MPNStorage").setPath(b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW),b("MPNXDMessageManager").reloadPlugin()},function(){b("MPNStorage").clearThirdPartyStorageState(),b("MPNXDMessageManager").reloadPlugin()});b("LiveChatPluginLoggerUtil").logActionFromNewUI("tab_click",null,c,"itp_page",{button_name:"continue"})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this,c=this.context.state.hasGuestMode;b("gkx")("2013630")?window.setTimeout(function(){return a.$1(c)},0):this.$1(c)};d.render=function(){var a=this,c=this.context.state,d=c.hasGuestMode,e=c.pageVerifiedStatus,f=c.alignment;c=c.uiPolishEnabled;var g=this.context.state,j=b("MPNIdentity").MPNIdentity.currentUserState()==b("MPNIdentity").MPNIdentityState.FB,k=b("gkx")("1189683"),l=b("XTermsController").getURIBuilder().getURI().toString(),n=b("XDataPolicyController").getURIBuilder().getURI().toString(),o=b("XCookiesPolicyControllerRouteBuilder").buildURL({}),p=h._("Discuter avec {pageName}",[h._param("pageName",g.pageName)]);return m.jsx("div",{"data-testid":void 0,ref:this.modalSheetRef,className:"_94vf"+(c&&f==="left"?" _9pmu":"")+(c&&f==="right"?" _9pmv":""),onClick:this.$2,role:"none",children:m.jsxs("div",{className:"welcomePageModalSheetContent",children:[m.jsxs("div",{className:"_9095",children:[m.jsx(b("MessagingPluginDesktopProfilePicture.react"),{className:"_9096",greenDotSize:"large"}),m.jsx("div",{className:"_9dxh"}),m.jsxs("div",{className:"_9dzn",children:[j?m.jsx(b("BasePopoverTrigger.react"),{align:"middle",popover:b("gkx")("2008125")?b("MPNDesktopSwitchAccountDropDownMenu.react"):b("MPNDesktopSwitchAccountMenu.react"),popoverProps:{},children:function(a,c){return m.jsx("div",{ref:a,className:"_97lh",children:m.jsxs(b("CometPressable.react"),{testid:void 0,onPress:c,overlayRadius:6,children:[m.jsx(b("Image.react"),{className:"_95lg _97lg",src:g.viewerProfilePicureUri}),m.jsx(b("Image.react"),{className:"_97lc",src:i("481882")})]})})}}):null,m.jsx(b("BasePopoverTrigger.react"),{popover:b("gkx")("2008125")?b("MessagingPluginDesktopInformationDropDownMenu.react"):b("MessagingPluginDesktopInformationMenu.react"),popoverProps:{},children:function(a,c){return m.jsx("div",{ref:a,children:m.jsx(b("MPNHeaderActionButton.react"),{label:h._("Plus"),onPress:c,children:m.jsx(b("MPNMoreInfoButtonSVG.react"),{})})})}}),m.jsx("div",{"data-testid":void 0,className:"_9q4i",children:m.jsx(b("MPNHeaderActionButton.react"),{label:h._("fermer"),onPress:function(){var b;return(b=a.props.ActionDelegate)==null?void 0:b.minimize()},children:m.jsx(b("MPNMinusButtonSVG.react"),{})})})]})]}),m.jsxs(b("FlexLayout.react"),{align:"center",className_DO_NOT_USE:"_9099",children:[m.jsx(b("LineClamp.react"),{lines:1,children:m.jsx("strong",{children:p})}),e&&e!=="not_verified"?m.jsx("span",{className:"lcfup58g",children:m.jsx(b("MPNVerifiedBadge.react"),{verificationStatus:e,size:18})}):null]}),m.jsx(b("LineClamp.react"),{className:"_909a",lines:1,children:g.pageResponsiveness}),m.jsx(b("LineClamp.react"),{className:"_909b",lines:3,children:j?g.loggedInGreeting:(c=g.loggedOutGreeting)!=null?c:b("LiveChatPluginFbts").DEFAULT_LOGGED_IN_GREETING_TEXT.toString()}),this.props.useITPContinueButton?this.$3():this.$4(d),m.jsx("div",{className:"_924l",children:this.props.useITPContinueButton?null:d?k?h._("En continuant en tant qu\u2019invit\u00e9(e), vous acceptez les {=Terms} de Facebook. D\u00e9couvrez comment nous collectons, utilisons et partageons vos donn\u00e9es dans notre {=Data Policy}, et comment nous utilisons les cookies et autres technologies similaires dans notre {=Cookies Policy}.",[h._param("=Terms",m.jsx(b("CometLink.react"),{href:l,target:"_blank",children:h._("Conditions g\u00e9n\u00e9rales")})),h._param("=Data Policy",m.jsx(b("CometLink.react"),{href:n,target:"_blank",children:h._("Politique d\u2019utilisation des donn\u00e9es")})),h._param("=Cookies Policy",m.jsx(b("CometLink.react"),{href:o,target:"_blank",children:h._("Politique d\u2019utilisation des cookies")}))]):h._("En continuant en tant qu\u2019invit\u00e9(e), vous acceptez les {=Terms}, la {=Data Policy} et la {=Cookies Policy} de Facebook.",[h._param("=Terms",m.jsx(b("CometLink.react"),{href:l,target:"_blank",children:h._("Conditions g\u00e9n\u00e9rales")})),h._param("=Data Policy",m.jsx(b("CometLink.react"),{href:n,target:"_blank",children:h._("Politique d\u2019utilisation des donn\u00e9es")})),h._param("=Cookies Policy",m.jsx(b("CometLink.react"),{href:o,target:"_blank",children:h._("Politique d\u2019utilisation des cookies")}))]):null})]})})};d.$5=function(){var a,c=b("MPNIdentity").MPNIdentity.currentUserState()==b("MPNIdentity").MPNIdentityState.FB;a=(a=b("MPNIdentity").MPNIdentity.currentUser())==null?void 0:a.shortName;if(!c)if(this.context.state.shouldUseChatInMessengerCTA)return h._("Discuter sur Messenger");else return h._("Connectez-vous \u00e0 Messenger");return a!==null?h._("Continuer en tant que {first name}",[h._param("first name",a)]):h._("Continuer")};d.$4=function(a){var c=this.context.state.threadCSSColor,d=b("MPNIdentity").MPNIdentity.currentUserState()==b("MPNIdentity").MPNIdentityState.FB;d=b("gkx")("1189683");d=!a&&!d;a=a?m.jsx(b("ShimButton.react"),{"data-testid":void 0,onClick:this.$6,className:"_909e",children:m.jsx(b("LineClamp.react"),{lines:1,children:h._("Continuer en tant qu\u2019invit\u00e9")})}):null;return m.jsxs("div",{className:(d?"":"_909c")+(d?" _9ihg":""),children:[m.jsxs(b("ShimButton.react"),{"data-testid":void 0,onClick:this.$7,className:"_909d",style:{backgroundColor:c},children:[m.jsx(b("MPNMessengerIconSVG.react"),{}),m.jsx(b("EllipsisText.react"),{className:"continueText",children:this.$5()})]}),a]})};d.$8=function(a,c){var d=this.context.state,e=d.refererUri,f=d.pageID,g=d.initialRequestUri;d=d.requestID;new(b("PluginOptin"))("customer_chat").addLoginParams({logged_in:a,page_id:f,switch_user:c,request_id:d}).addReturnParams((a=g==null?void 0:g.getQueryData())!=null?a:{}).addReturnParams({customer_chat_origin_uri:e,referer_uri:e}).start()};d.$3=function(){var a=this.context.state.threadCSSColor;return m.jsx("div",{className:"_909c",children:m.jsx(b("ShimButton.react"),{onClick:this.$10,className:"_909d",style:{backgroundColor:a},children:m.jsx(b("LineClamp.react"),{className:"continueText",lines:1,children:h._("Continuer")})})})};d.$1=function(a){var c=b("ReactDOM").findDOMNode(this.modalSheetRef.current);if(c instanceof HTMLElement){a=a?b("LiveChatPluginConstants").WELCOME_PAGE_GUEST_FALLBACK_HEIGHT:b("LiveChatPluginConstants").WELCOME_PAGE_NO_GUEST_FALLBACK_HEIGHT;c=Math.max(c.offsetHeight,a);a=c+b("LiveChatPluginConstants").WELCOME_PAGE_PADDING_HEIGHT;b("MPNXDMessageManager").resizeIframe(a.toString())}};d.$2=function(a){a.stopPropagation()};return c}(m.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopWelcomePageModal.react",["cx","BootloaderResource","JSResource","MPNDesktopWelcomePageModalView.react","MessagingPluginContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return i.jsx("div",{children:i.jsx("div",{role:"none",onMouseEnter:function(){b("BootloaderResource").preload(b("JSResource")("MessagingPluginDialogBody.react").__setRef("MPNDesktopWelcomePageModal.react"))},className:"_94ve",children:i.jsx(b("MPNDesktopWelcomePageModalView.react"),babelHelpers["extends"]({},this.props))})})};return c}(i.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopITPContinuePage.react",["LiveChatPluginLoggerUtil","MPNDesktopWelcomePageModal.react","MPNXDMessageManager","MessagingPluginContext","MessagingPluginPathUtils","gkx","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=this.context.state,c=a.alignment,d=a.bottomSpacing,e=a.pageID,f=a.pluginMountTime;a=a.shouldIconDelay;b("MPNXDMessageManager").setupDesktopIframe(c,d,b("MessagingPluginPathUtils").MPN_PATH.ITPCONTINUE,a);b("gkx")("1877511")?b("LiveChatPluginLoggerUtil").logImpressionUsingFalco(e,"itp_page",f,["continue"]):b("LiveChatPluginLoggerUtil").logImpressionFromNewUI("tab_impression",e,"itp_page",f,["continue"])};d.render=function(){try{return h.jsx(b("MPNDesktopWelcomePageModal.react"),{ActionDelegate:this.props.ActionDelegate,history:this.props.history,useITPContinueButton:!0})}catch(a){b("LiveChatPluginLoggerUtil").logImpressionExceptionsFromNewUI("tab_load_failure",this.context.state.pageID,"itp_page",a.name,a.message,a.stack)}};return c}(h.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopIcon.react",["ClickableArea.react","LiveChatPluginDefaultMessengerIconSVG.react","LiveChatPluginLoggerUtil","LiveChatPluginMessengerIconSVGWithColor.react","MPNXDMessageManager","gkx","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={visibility:d.props.initialVisibility,disabled:!1},d.$1=function(a){a=((a=a.data.params)==null?void 0:a.is_dialog_hidden)==!0?"hidden":"not-hidden";d.setState({visibility:a})},d.$2=function(){if(d.state.disabled==!0)return;else b("gkx")("1897324")?d.props.actionDelegate.togglePluginVisibility():b("MPNXDMessageManager").fetchThirdPartyState(function(a){a=(a=a==null?void 0:(a=a.params)==null?void 0:a.visibility)!=null?a:d.state.visibility;var b=a=="hidden"?"not-hidden":"hidden";a=="not-hidden"?d.props.actionDelegate.minimize():d.props.actionDelegate.maximize();d.setState({visibility:b})}),d.setState({disabled:!0}),window.setTimeout(function(){d.setState({disabled:!1})},350)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("gkx")("1909041")?b("LiveChatPluginLoggerUtil").logImpressionUsingXController(this.props.pageID,"plugin_icon",this.props.pluginRequestTime,null,null,null,null,this.props.clientRequestTime):(b("LiveChatPluginLoggerUtil").logImpressionUsingFalco(this.props.pageID,"plugin_icon",this.props.pluginRequestTime,null,null,null,null,this.props.clientRequestTime),b("MPNXDMessageManager").subscribeEvent("desktop-icon","message","CustomerChat.isDialogHidden",this.$1))};d.render=function(){return h.jsx(b("ClickableArea.react"),{"data-testid":void 0,onClick:this.$2,children:h.jsx("svg",{width:"60px",height:"60px",viewBox:"0 0 60 60",cursor:"pointer",children:this.props.threadColor!=null?h.jsx(b("LiveChatPluginMessengerIconSVGWithColor.react"),{threadColor:this.props.threadColor}):h.jsx(b("LiveChatPluginDefaultMessengerIconSVG.react"),{})})})};return c}(h.Component);e.exports=a}),null);
__d("LiveChatPluginMessageComposerAttachmentItem.react",["cx","ix","Image.react","ShimButton.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.attachment;if(a.type.startsWith("image/"))return[j.jsx("div",{className:"_3l_i",style:{backgroundImage:a.thumbnail_url}},this.props.uploadID+"item"),j.jsx(b("ShimButton.react"),{className:"_3l_j _3l_k",onClick:this.props.removeAttachment},this.props.uploadID+"removeButton")];var c=j.jsx("div",{className:"_3l_l",style:{backgroundColor:this.props.threadColor},children:j.jsx(b("Image.react"),{src:a.type.startsWith("video/")?h("359148"):h("359146")})});a=a.name;var d=a.split(".").pop().toUpperCase();return j.jsxs("div",{className:"_3l_m",children:[c,j.jsxs("div",{className:"_3l_n",children:[j.jsx("div",{className:"_3l_o",children:d}),j.jsx("div",{className:"_3l_p",children:a})]}),j.jsx(b("ShimButton.react"),{className:"_3l_j _3l_q",onClick:this.props.removeAttachment})]})};return c}(j.PureComponent);e.exports=a}),null);
__d("LiveChatPluginMessageComposerAttachmentShelf.react",["cx","fbt","LiveChatPluginAttachmentUploadError","LiveChatPluginMessageComposerAttachmentItem.react","XUISpinner.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react");a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.$1=new Map();return b}var d=c.prototype;d.render=function(){var a=this;if(this.props.attachments.size===0&&this.props.error===b("LiveChatPluginAttachmentUploadError").NO_ERROR)return null;this.props.attachments.forEach(function(b,c){a.$1.has(c)||a.$1.set(c,b)});this.$1.forEach(function(b,c){a.props.attachments.has(c)||a.$1["delete"](c)});var c=Array.from(this.$1).map(function(c){var d=c[0];c=c[1];return j.jsxs("div",{className:"_1i5v",children:[j.jsx(b("LiveChatPluginMessageComposerAttachmentItem.react"),{attachment:c,removeAttachment:function(){a.props.removeAttachment(d)},threadColor:a.props.threadColor,uploadID:d}),a.props.uploadingAttachments.has(d)?j.jsx(b("XUISpinner.react"),{className:"_1i63",background:"dark",size:"large"}):null]},d)});return j.jsxs("div",{className:"_1i69",children:[this.$2(),j.jsx("div",{className:"_2l9u",children:c})]})};d.$2=function(){var a;switch(this.props.error){case b("LiveChatPluginAttachmentUploadError").EXCEEDED_MAX_FILES:a=h._("Upload no more than 5 files at once. Please try again.");break;case b("LiveChatPluginAttachmentUploadError").EXCEEDED_FILE_MAX_SIZE:a=h._("This file exceeds the size limit of 25MB.");break;case b("LiveChatPluginAttachmentUploadError").UPLOAD_FAILED:a=h._("This file couldn't be uploaded. Please try again.");break;case b("LiveChatPluginAttachmentUploadError").NO_ERROR:default:return null}return j.jsx("div",{className:"_2l9v",children:a})};return c}(j.PureComponent);e.exports=a}),null);
__d("StickerConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MOBILE_LIKE_STICKER_PACK_ID:"227877430692340",GRAVEYARD_PACK_ID:"604597256247273",LIKE_STICKER_ID:"227878347358915",HOT_LIKE_SMALL_STICKER_ID:"369239263222822",HOT_LIKE_MEDIUM_STICKER_ID:"369239343222814",HOT_LIKE_LARGE_STICKER_ID:"369239383222810",MRU_STICKER_PACK:"599061016853145",SEARCH_PACK_ID:"680229632032514",FEED_PACK_ID:"2239834712900285",OZ_PACK_ID:"1456625217993235",AVATARS_PACK_ID:"2191329907595522",TRENDING_STICKER_PACK_ID:"924487421216423",SPRITE_PADDING:"24",PayloadSource:{VIEW_ACTION:"view-action"},DEFAULT_FRAME_RATE:83,TRAY_SIZE:64,THREAD_SIZE:120})}),null);
__d("MPNDesktopMessageComposer.react",["cx","fbt","AbstractTextInput.react","JSResource","Keys","LiveChatPluginAttachmentUploadError","LiveChatPluginLoggerUtil","LiveChatPluginMessageComposerAttachmentShelf.react","LiveChatPluginSendButtonSVG.react","MPNDesktopBotMenuButton.react","MPNDesktopGuestAttachmentButton.react","MPNIdentity","MPNLocalState","MPNPaperclipIconSVG.react","MercuryIDs","MercuryMessageActions","MercuryMessageObject","MessagingPluginContext","ShimButton.react","StickerConstants","Tooltip.react","gkx","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react"),k=b("lazyLoadComponent")(b("JSResource")("MPNDesktopAttachmentInput.react").__setRef("MPNDesktopMessageComposer.react"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this,c,d)||this;e.state={attachmentsDataMap:new Map(),error:b("LiveChatPluginAttachmentUploadError").NO_ERROR,inputValue:"",uploadingAttachments:new Set()};e.$19=function(a){e.props.onChange(),e.setState({error:b("LiveChatPluginAttachmentUploadError").NO_ERROR,inputValue:a.target.value})};e.$20=function(a){a.keyCode===b("Keys").RETURN&&(a.preventDefault(),e.$18())};e.$18=function(){var a=b("MPNIdentity").MPNIdentity.currentUserState();a===b("MPNIdentity").MPNIdentityState.FB?e.$21():a===b("MPNIdentity").MPNIdentityState.GUEST&&e.$22();e.context.state.hasActiveAutomation&&b("LiveChatPluginLoggerUtil").logAction("automation_freeform_message_sent",b("MPNIdentity").MPNIdentity.currentUserID(),e.context.state.pageID)};e.$17=function(){var a=e.context.state.pageID,c=e.$7.constructStickerMessageObject(b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID,"source:discovery:customer_chat_plugin",e.$8,e.$9);c.is_like_preview=!0;e.$6.send(c);e.setState({error:b("LiveChatPluginAttachmentUploadError").NO_ERROR,inputValue:""});b("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",b("MPNIdentity").MPNIdentity.currentUserID(),a,"logged_in_chat_tab")};e.$11=function(a){e.$2&&e.$2.removeAttachment(a)};e.$15=function(a){e.setState({error:a})};e.$16=function(a,c,d,f,g,h){d&&(e.$1=d),f&&(e.$3=f),g&&(e.$4=g),h&&(e.$10=h),e.setState({attachmentsDataMap:new Map(a),error:b("LiveChatPluginAttachmentUploadError").NO_ERROR,uploadingAttachments:new Set(c)}),e.focus()};c=e.context.state.pageID;d=b("MPNIdentity").MPNIdentity.currentUserID();if(d==null)return babelHelpers.assertThisInitialized(e);e.$6=b("MercuryMessageActions").getForFBID(d);e.$7=b("MercuryMessageObject").getForFBID(d);e.$8=b("MercuryIDs").getThreadIDFromUserID(c);e.$9=b("LiveChatPluginLoggerUtil").getAttributionTags();e.$1=[];e.$3=[];e.$4=[];e.$10=[];return e}var d=c.prototype;d.componentDidMount=function(){this.focus()};d.render=function(){return j.jsxs("div",{className:(this.context.state.isComposerDisabled?"_664i":"")+" _94vs",children:[j.jsx(b("LiveChatPluginMessageComposerAttachmentShelf.react"),{attachments:this.state.attachmentsDataMap,error:this.state.error,removeAttachment:this.$11,threadColor:this.context.state.threadColor,uploadingAttachments:this.state.uploadingAttachments}),j.jsxs("div",{className:"_94vt",children:[this.$12(),this.$13(),this.$14()]})]})};d.$12=function(){var a=this,c=this.context.state,d=c.isComposerDisabled,e=c.optimisticStorageState;c=c.showUpgradeUpsellPrompt;if(d||e.chatState===b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED)return null;if(b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.GUEST)if(c===!0)return j.jsx(b("MPNDesktopGuestAttachmentButton.react"),{threadColor:this.context.state.threadCSSColor});else return null;d=b("MPNIdentity").MPNIdentity.currentUserID();return d==null?null:j.jsx(j.Suspense,{fallback:j.jsx("div",{className:"_95jj",children:j.jsx(b("MPNPaperclipIconSVG.react"),{color:this.context.state.threadCSSColor})}),children:j.jsx(k,{pageID:this.context.state.pageID,ref:function(b){a.$2=b},setComposerAttachmentError:this.$15,updateComposerAttachmentsAndIDs:this.$16,viewerID:d})})};d.$14=function(){var a=this.context.state,c=a.isComposerDisabled;a=a.threadCSSColor;var d=this.state.inputValue.length===0&&this.state.attachmentsDataMap.size===0;return d||c?j.jsx(b("MPNDesktopBotMenuButton.react"),{onClick:this.props.onClick,onLikeClick:this.$17}):j.jsx(b("Tooltip.react"),{tooltip:"Send",children:j.jsx(b("ShimButton.react"),{"aria-label":h._("Envoyer"),className:"_4bqf _95jk _9jru","data-testid":void 0,onClick:this.$18,children:j.jsx(b("LiveChatPluginSendButtonSVG.react"),{threadColor:a})})})};d.$13=function(){var a=this,c=this.context.state,d=c.pageName;c=c.isComposerDisabled;var e=b("gkx")("1755315");e=e?h._("Saisie clavier d\u00e9sactiv\u00e9e pour cette conversation."):h._("{page name} a d\u00e9sactiv\u00e9 la saisie.",[h._param("page name",d)]);return c?j.jsx("div",{className:"_664k",children:e}):j.jsx("div",{className:"_94vv",children:j.jsx(b("AbstractTextInput.react"),{"data-testid":void 0,onBlur:this.props.onBlur,onChange:this.$19,onClick:this.props.onClick,onFocus:this.props.onFocus,onKeyDown:this.$20,ref:function(b){a.$5=b},placeholder:h._("Posez une question\u2026").toString(),value:this.state.inputValue})})};d.$22=function(){var a=this.context.state;if(!a.messageStore||!a.messageStore.sendQueue)return;var c=a.messageStore.sendQueue,d=this.state.inputValue.trim();d&&d.length>0&&c.enqueueAndSend(d,null);this.setState({inputValue:""});b("gkx")("1874704")?b("LiveChatPluginLoggerUtil").logActionUsingFalco(a.guestID,a.pageID,"guest_chat_tab","message_send"):b("LiveChatPluginLoggerUtil").logActionFromNewUI("message_send",a.guestID,a.pageID,"guest_chat_tab")};d.$21=function(){var a=this.context.state.pageID,c=b("MPNIdentity").MPNIdentity.currentUserID();if(this.state.uploadingAttachments.size!==0)return;var d=this.state.inputValue.trim();if(d&&d.length>0||this.state.attachmentsDataMap.size>0){d=this.$7.constructUserGeneratedMessageObject(d,"source:discovery:customer_chat_plugin",this.$8,null,null,this.$9);this.$4.length>0&&(d.has_attachment=!0,d.image_ids=this.$4);this.$1.length>0&&(d.has_attachment=!0,d.gif_ids=this.$1);this.$10.length>0&&(d.has_attachment=!0,d.video_ids=this.$10);this.$3.length>0&&(d.has_attachment=!0,d.file_ids=this.$3);this.$6.send(d);this.setState({inputValue:""});this.$23();b("LiveChatPluginLoggerUtil").logAction("customer_chat_message_sent",c,a,this.state.attachmentsDataMap.size>0?JSON.stringify({attachments:Array.from(this.state.attachmentsDataMap.keys())}):null);if(b("gkx")("1874704")){b("LiveChatPluginLoggerUtil").logActionUsingFalco((d=c)!=null?d:"",this.context.state.pageID,"logged_in_chat_tab","message_send")}else b("LiveChatPluginLoggerUtil").logActionFromNewUI("message_send",c,a,"logged_in_chat_tab")}};d.$23=function(){this.$2&&this.$2.removeAllAttachments()};d.focus=function(){this.$5&&this.$5.focusInput()};return c}(j.PureComponent);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopThreadPage.react",["cx","JSResource","LiveChatPluginConstants","LiveChatPluginLoggerUtil","MPNBlockedPageComposer.react","MPNConstants","MPNDesktopDialogHeader.react","MPNDesktopGuestUpgradeUpsellPrompt.react","MPNDesktopMessageComposer.react","MPNEndChatPrompt.react","MPNIdentity","MPNLocalState","MPNXDMessageManager","MessagingPluginContext","MessengerSpinner.react","MessengerState.bs","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("lazyLoadComponent")(b("JSResource")("MessagingPluginDialogBody.react").__setRef("MPNDesktopThreadPage.react")),j=h||(h=b("react"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={dialogBodyHeight:-1},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=b("LiveChatPluginConstants").THREAD_PAGE_HEIGHT+b("LiveChatPluginConstants").THREAD_PAGE_PADDING_HEIGHT;b("MPNXDMessageManager").resizeIframe(a.toString())};d.render=function(){var a=this,c=this.context.state,d=c.optimisticStorageState,e=c.pageID,f=c.isPageBlocked;c=c.showUpgradeUpsellPrompt;var g=b("MPNIdentity").MPNIdentity.currentUserID(),h=b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.GUEST;try{return j.jsx("div",{role:"none",className:"_94vg",children:j.jsx("div",{className:d.chatState===b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED?"_91hz":"",children:j.jsxs("div",{className:"_94vh",children:[j.jsx(b("MPNDesktopDialogHeader.react"),{ActionDelegate:this.props.ActionDelegate,history:this.props.history}),j.jsxs("div",{className:"_424s",children:[d.chatState===b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED&&j.jsx("div",{className:"spinner",children:j.jsx(b("MessengerSpinner.react"),{color:"blue",size:b("MessengerSpinner.react").large_size})}),j.jsx(j.Suspense,{fallback:j.jsx("div",{className:"spinner",children:j.jsx(b("MessengerSpinner.react"),{color:"blue",size:b("MessengerSpinner.react").large_size})}),children:d.chatState!==b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED&&j.jsx(b("MessengerState.bs").jsComponent,{fbid:g,children:function(c){return j.jsx(i,{deliveryReceipt:b("MessengerState.bs").deliveryReceipts(c),dialogBodyHeight:a.state.dialogBodyHeight,messengerState:c,readReceipt:null,sendRef:function(){}})}})})]}),d.showUpgradePrompt==null||d.showUpgradePrompt===b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN||!c?null:j.jsx(b("MPNDesktopGuestUpgradeUpsellPrompt.react"),{color:this.context.state.threadCSSColor,prompt:this.context.state.optimisticStorageState.showUpgradePrompt,history:this.props.history}),j.jsx(b("MPNEndChatPrompt.react"),{isGuest:h,history:this.props.history,shouldMinimize:!1}),f&&d.chatState===b("MPNLocalState").MPNChatState.LOGGED_IN_CHAT_STARTED?j.jsx(b("MPNBlockedPageComposer.react"),{}):j.jsx(b("MPNDesktopMessageComposer.react"),{onBlur:function(){},onChange:function(){},onClick:function(){},onFocus:function(){},ref:function(b){return a.$1=b}})]},"dialog_container")})})}catch(a){b("LiveChatPluginLoggerUtil").logImpressionExceptionsFromNewUI("tab_load_failure",e,b("MPNIdentity").MPNIdentity.currentUserState()===b("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",a.name,a.message,a.stack)}};return c}(j.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MPNDesktopWelcomePage.react",["LiveChatPluginLoggerUtil","MPNDesktopWelcomePageModal.react","MPNIdentity","MessagingPluginContext","gkx","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=this.context.state,c=a.pageID,d=a.pluginMountTime;a=a.hasGuestMode;var e=b("MPNIdentity").MPNIdentity.currentUserState()==b("MPNIdentity").MPNIdentityState.FB;b("gkx")("1877511")?b("LiveChatPluginLoggerUtil").logImpressionUsingFalco(c,a?"welcome_page_with_guest_option":"welcome_page",d,a?[e?"continue_as":"chat_in_messenger","continue_as_guest"]:["chat_in_messenger"]):b("LiveChatPluginLoggerUtil").logImpressionFromNewUI("tab_impression",c,a?"welcome_page_with_guest_option":"welcome_page",d,a?[e?"continue_as":"chat_in_messenger","continue_as_guest"]:["chat_in_messenger"])};d.render=function(){try{return h.jsx(b("MPNDesktopWelcomePageModal.react"),{ActionDelegate:this.props.ActionDelegate,history:this.props.history,useITPContinueButton:!1})}catch(d){var a=this.context.state,c=a.pageID;a=a.hasGuestMode;b("LiveChatPluginLoggerUtil").logImpressionExceptionsFromNewUI("tab_load_failure",c,a?"welcome_page_with_guest_option":"welcome_page",d.name,d.message,d.stack)}};return c}(h.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MessagingPluginDesktopWelcomeMessagePage.react",["cx","Arbiter","LiveChatPluginConstants","LiveChatPluginFbts","LiveChatPluginLoggerUtil","MPNLocalState","MPNNavigation","MPNWelcomeMessageMinusButtonSVG.react","MPNXDMessageManager","MessagingPluginContext","MessagingPluginPathUtils","ShimButton.react","react","useResizeObserver"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=h||b("react");function a(a){var c=i.useContext(b("MessagingPluginContext")),d=c.state,e=d.alignment,f=d.bottomSpacing,g=d.loggedInGreeting,h=d.pageID,j=d.serverTime,k=d.clientRequestTime;d=i.useState(!1);var l=d[0],m=d[1];d=i.useRef(null);var n=b("useResizeObserver")(function(a,c){a=c.clientHeight+12;b("MPNXDMessageManager").resizeIframe(a.toString())});i.useEffect(function(){var a=b("Arbiter").subscribe(b("LiveChatPluginConstants").NAVIGATE_TO_WELCOME_PAGE,function(a){m(!0),p()});return function(){a&&a.unsubscribe()}});i.useEffect(function(){b("LiveChatPluginLoggerUtil").logImpressionUsingXController(h,"bubble",j,null,null,null,null,k)},[h,k,j]);var o=function(){a.ActionDelegate&&a.ActionDelegate.minimize(),window.setTimeout(function(){var d;b("MPNNavigation").navigateToRoute(a.history,b("MPNLocalState").MPNLocalStatePath.WELCOME_PAGE);b("MPNXDMessageManager").setupDesktopIframe((d=e)!=null?d:"right",(d=f)!=null?d:0,b("MessagingPluginPathUtils").MPN_PATH.WELCOME,!1);d={path:b("MPNLocalState").MPNLocalStatePath.WELCOME_PAGE,chatState:b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED,visibility:"hidden"};c.dispatchAction({type:"START_CHAT",optimisticStorageState:d})},100)},p=function(){window.setTimeout(function(){var d;b("MPNNavigation").navigateToRoute(a.history,b("MPNLocalState").MPNLocalStatePath.WELCOME_PAGE);b("MPNXDMessageManager").setupDesktopIframe((d=e)!=null?d:"right",(d=f)!=null?d:0,b("MessagingPluginPathUtils").MPN_PATH.WELCOME,!0);d={path:b("MPNLocalState").MPNLocalStatePath.WELCOME_PAGE,chatState:b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED,visibility:"not-hidden"};c.dispatchAction({type:"START_CHAT",optimisticStorageState:d})},100)},q=e==="left"?"_9ptl":"_9ptk",r=e==="left"?"_9ptn":"_9ptm",s=e==="left"?"_9ptp":"_9pto";l=l?"_9po3":"_9po2";return i.jsxs("div",{className:l,ref:d,children:[i.jsx(b("ShimButton.react"),{onClick:function(){p(),b("LiveChatPluginLoggerUtil").logActionFromNewUI("tab_click",null,c.state.pageID,"plugin_icon",{opened_tab:"bubble"})},children:i.jsx("div",{"data-testid":void 0,className:q,ref:n,children:i.jsx("div",{className:r,children:g!=null?g:b("LiveChatPluginFbts").DEFAULT_LOGGED_IN_GREETING_TEXT.toString()})})}),i.jsx("div",{className:s,children:i.jsx(b("ShimButton.react"),{"data-testid":void 0,onClick:o,className:"_9pti",children:i.jsx(b("MPNWelcomeMessageMinusButtonSVG.react"),{})})})]})}}),null);
__d("MPNDesktopRoute.react",["MPNDesktopITPContinuePage.react","MPNDesktopThreadPage.react","MPNDesktopWelcomePage.react","MessagingPluginDesktopWelcomeMessagePage.react","MessagingPluginPathUtils","ReactRouterDOM","react"],(function(a,b,c,d,e,f){e.exports=a;var g,h=g||b("react");function a(a){var c,d=a.path,e=a.ActionDelegate;return h.jsx((a=b("ReactRouterDOM")).BrowserRouter,{children:h.jsxs(a.Switch,{children:[h.jsx(a.Route,{render:function(a){return h.jsx(b("MPNDesktopWelcomePage.react"),babelHelpers["extends"]({},a,{ActionDelegate:e}))},exact:!0,path:(c=b("MessagingPluginPathUtils")).MPN_PATH.WELCOME}),h.jsx(a.Route,{render:function(a){return h.jsx(b("MPNDesktopITPContinuePage.react"),babelHelpers["extends"]({},a,{ActionDelegate:e}))},exact:!0,path:c.MPN_PATH.ITPCONTINUE}),h.jsx(a.Route,{render:function(a){return h.jsx(b("MPNDesktopThreadPage.react"),babelHelpers["extends"]({},a,{ActionDelegate:e}))},exact:!0,path:c.MPN_PATH.THREAD}),h.jsx(a.Route,{render:function(a){return h.jsx(b("MessagingPluginDesktopWelcomeMessagePage.react"),babelHelpers["extends"]({},a,{ActionDelegate:e}))},exact:!0,path:c.MPN_PATH.BUBBLE}),h.jsx(a.Redirect,{to:d})]})})}}),null);
__d("MPNDesktopWrapper.react",["Arbiter","AsyncRequest","Bootloader","CreateCustomerChatPluginGuestUserMutation","LiveChatMqttClient","LiveChatPluginConstants","LiveChatPluginLoggerUtil","LiveChatPluginMessengerIconSVGWithColor.react","LiveChatPluginUtils","MPNConstants","MPNDesktopIcon.react","MPNDesktopRoute.react","MPNIdentity","MPNLocalState","MPNNavigation","MPNStorage","MPNUnreadCountBadge.react","MPNXDMessageManager","MessagingPluginContext","MessagingPluginGuestUpgradeActions","MessagingPluginPathUtils","ODS","Plugin","PluginOptin","ReactDOM","XMNPlatformCustomerChatPluginOpenThreadController","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i={NONE:0,CREATE_GUEST_SESSION:1,START_NEW_THREAD:2,GUEST_UPGRADE:3,GUEST_UPGRADE_SWITCH_ACCOUNT:4};a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.actionOnInit=i.NONE;d.iconIframeLoaded=!1;d.unreadCountIframeLoaded=!1;d.$2=null;d.initialPath=d.$5();d.props.redirectCommand==b("MPNConstants").MPNRedirect.NEW_GUEST_SESSION?d.actionOnInit=i.CREATE_GUEST_SESSION:d.props.redirectCommand==b("MPNConstants").MPNRedirect.FB_LOG_IN?d.actionOnInit=i.START_NEW_THREAD:d.props.redirectCommand==b("MPNConstants").MPNRedirect.GUEST_UPGRADE?d.actionOnInit=i.GUEST_UPGRADE:d.props.redirectCommand===b("MPNConstants").MPNRedirect.GUEST_UPGRADE_SWITCH_ACCOUNT&&(d.actionOnInit=i.GUEST_UPGRADE_SWITCH_ACCOUNT);d.ActionDelegate={onContinueAsGuest:d.onContinueAsGuest.bind(babelHelpers.assertThisInitialized(d)),openThreadWithCurrentFBUser:d.openThreadWithCurrentFBUser.bind(babelHelpers.assertThisInitialized(d)),openThreadWithInterstitial:d.openThreadWithInterstitial.bind(babelHelpers.assertThisInitialized(d)),onChatInMessenger:function(){},minimize:function(){b("MPNNavigation").minimizePlugin(d.context,!1)},maximize:function(){b("MPNNavigation").maximizePlugin(d.context,!1)},togglePluginVisibility:d.togglePluginVisibility.bind(babelHelpers.assertThisInitialized(d))};d.$1=window.name;return d}var d=c.prototype;d.$5=function(){var a=this.props.redirectCommand;return a==b("MPNConstants").MPNRedirect.NEW_GUEST_SESSION||a==b("MPNConstants").MPNRedirect.FB_LOG_IN?b("MessagingPluginPathUtils").MPN_PATH.THREAD:this.props.path};d.componentDidMount=function(){var a=this.context.state,c=a.alignment,d=a.bottomSpacing,e=a.shouldIconDelay;a=a.optimisticStorageState;this.$6();b("MPNXDMessageManager").setupDesktopIframe(c,d,this.initialPath,a.visibility=="not-hidden",e);this.initialPath===b("MessagingPluginPathUtils").MPN_PATH.BUBBLE&&(b("MPNStorage").setVisibility("not-hidden"),this.context.dispatchAction({type:"UPDATE_DIALOG_VISIBILITY",dialogVisibility:"not-hidden"}));this.$7();this.$8()};d.componentWillUnmount=function(){this.$3&&window.clearTimeout(this.$3),this.$4&&window.clearTimeout(this.$4)};d.componentDidUpdate=function(){this.$8()};d.$8=function(){var a=this,c=this.context.state,d=c.optimisticStorageState,e=c.pageID,f=c.pageName,g=c.accessToken;c=c.loggedInAccessToken;var h=b("MPNIdentity").MPNIdentity.currentUserID();if(this.$2==h||d.chatState===b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED||h==null)return;d=b("MPNIdentity").MPNIdentity.currentUserState();d===b("MPNIdentity").MPNIdentityState.FB&&(b("LiveChatMqttClient").setUp(e,h,null,function(){return a.$2=h},c),b("Bootloader").loadModules(["LiveChatPluginAlerts","MercurySyncDeltaHandler"],function(a,c){a.init(h,e,f,new Map(),!1,0),c.getForFBID(h),b("Arbiter").inform("MercurySyncDeltaHandler/initSeqID",{fbid:h,seqID:0})},"MPNDesktopWrapper.react"));d===b("MPNIdentity").MPNIdentityState.GUEST&&(g!=null&&(b("LiveChatMqttClient").setUp(e,h,null,null,g),this.$2=h))};d.$6=function(){var a=this,c=this.context.state,d=c.alignment,e=c.bottomSpacing;c=c.uiPolishEnabled;var f=this.context.state,g=h.jsx(b("LiveChatPluginMessengerIconSVGWithColor.react"),{threadColor:f.threadCSSColor});b("MPNXDMessageManager").setupIconIframe(this.$1,d,e,g,c,this.$9());b("MPNXDMessageManager").subscribeEvent("plugin_wrapper","message","bubbleFrameLoaded",function(c){try{if(c.data.frameName!=null&&!a.iconIframeLoaded){var d=h.jsx(b("MPNDesktopIcon.react"),{threadColor:f.threadCSSColor,actionDelegate:a.ActionDelegate,pageID:f.pageID,pluginRequestTime:f.serverTime,initialVisibility:f.optimisticStorageState.visibility,clientRequestTime:f.clientRequestTime}),e=parent.frames[c.data.frameName].document.body;b("ReactDOM").render(d,e);a.iconIframeLoaded=!0}if(c.data.unreadCountFrameName!=null){d=h.jsx(b("MPNUnreadCountBadge.react"),{});e=parent.frames[c.data.unreadCountFrameName].document.body;b("ReactDOM").render(d,e);a.unreadCountIframeLoaded=!0}a.$10()}catch(d){b("LiveChatPluginLoggerUtil").logImpressionExceptionsFromNewUI("tab_load_failure",a.context.state.pageID,"plugin_icon",d.name,d.message,d.stack,JSON.stringify({eventData:c.data,unreadCountIframeLoaded:a.unreadCountIframeLoaded,iconIframeLoaded:a.iconIframeLoaded}))}})};d.$9=function(){var a=this.context.state,c=a.shouldIconDelay;a=a.optimisticStorageState;if(a.visibility==="not-hidden")return a.path===b("MPNLocalState").MPNLocalStatePath.BUBBLE&&c;else return c};d.$10=function(){var a=this,c=this.context.state,d=c.greetingDialogDelay,e=c.greetingDialogDisplay;c=c.isInitialLoad;if(!c)return;c=!1;var f=0,g=d;switch(e){case"show":case"unset":c=d>0;break;case"fade":c=d>0;g=d;f=b("LiveChatPluginConstants").PLUGIN_FADE_DELAY;break;case"hide":c=!1;break;default:break}if(!c)return;this.$3=window.setTimeout(function(){a.$11(f)},g)};d.$11=function(a){var c=this;this.context.state.optimisticStorageState.visibility==="hidden"&&(b("MPNNavigation").maximizePlugin(this.context,!1),a&&(this.$4=window.setTimeout(function(){c.context.state.optimisticStorageState.visibility!=="hidden"&&b("MPNNavigation").minimizePlugin(c.context,!1)},a)))};d.$7=function(){var a=this;b("MPNXDMessageManager").subscribeEvent("plugin_wrapper","message","CustomerChat.SDK.Called",function(c){var d=a.context.state,e=d.pageID,f=d.greetingDialogDelay,g=d.threadCSSColor,h=d.loggedInGreeting;d=d.loggedOutGreeting;c=b("LiveChatPluginLoggerUtil").EVENTMAP[c.data.event];b("LiveChatPluginLoggerUtil").logImpressionEvents(c,e,JSON.stringify({greetingDialogDelay:f}),g,h,d)});b("MPNXDMessageManager").subscribeEvent("plugin_wrapper","message","updateCustomerChat",function(c){var d=a.context,e=d.state;d=d.dispatchAction;var f=e.loggedInGreeting,g=e.loggedOutGreeting;e=e.refParam;try{c=(c=c.data)==null?void 0:(c=c.message)==null?void 0:c.params;if(c==null)return;c=JSON.parse(c);var h=b("LiveChatPluginUtils").getSanitizedGreetingText(c.logged_in_greeting),i=b("LiveChatPluginUtils").getSanitizedGreetingText(c.logged_out_greeting);d({type:"SDK_UPDATE",loggedInGreeting:(d=h)!=null?d:f,loggedOutGreeting:(h=i)!=null?h:g,refParam:(d=c.ref)!=null?d:e})}catch(a){}});b("MPNXDMessageManager").subscribeEvent("plugin_wrapper","message","CustomerChat.isDialogHidden",function(c){c=((c=c.data.params)==null?void 0:c.is_dialog_hidden)==!0?"hidden":"not-hidden";b("MPNStorage").setVisibility(c);a.context.dispatchAction({type:"UPDATE_DIALOG_VISIBILITY",dialogVisibility:c})})};d.render=function(){this.actionOnInit==i.CREATE_GUEST_SESSION?(this.actionOnInit=i.NONE,this.onContinueAsGuest(function(){b("MPNStorage").clearRedirectCommand()})):this.actionOnInit==i.START_NEW_THREAD?(this.actionOnInit=i.NONE,b("MPNStorage").clearRedirectCommand(),this.openThreadWithCurrentFBUser()):this.actionOnInit==i.GUEST_UPGRADE?(this.actionOnInit=i.NONE,b("MPNStorage").clearRedirectCommand(),b("MessagingPluginGuestUpgradeActions").clearGuestStorage(this.context),b("MessagingPluginGuestUpgradeActions").setPluginStateToUpgradedThread(this.context)):this.actionOnInit==i.GUEST_UPGRADE_SWITCH_ACCOUNT&&(this.actionOnInit=i.NONE,b("MPNStorage").clearRedirectCommand(),b("MPNIdentity").MPNIdentity.subscribeLoggedInUserChanges(function(a,c){a=b("MPNStorage").getFBStorageState();a!=null&&b("MPNStorage").setFBStorageState(babelHelpers["extends"]({},a,{rdr:b("MPNConstants").MPNRedirect.GUEST_UPGRADE}));b("MPNXDMessageManager").reloadPlugin()},250));return this.context.state.optimisticStorageState.visibility=="not-hidden"||this.iconIframeLoaded?h.jsx(b("MPNDesktopRoute.react"),{path:this.initialPath,ActionDelegate:this.ActionDelegate}):null};d.$12=function(){var a=b("MPNStorage").getFBStorageState(),c=b("MPNIdentity").MPNIdentity.currentUserID();if(a==null||c==null)return;var d={path:b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW,chatState:b("MPNLocalState").MPNChatState.LOGGED_IN_CHAT_STARTED,visibility:"not-hidden"};b("MPNStorage").setFBStorageState(babelHelpers["extends"]({},a,{currentPath:d.path,chatState:d.chatState,userID:c}));b("MPNStorage").setThirdPartyStorageState(d);this.context.dispatchAction({type:"START_CHAT",optimisticStorageState:d})};d.openThreadWithCurrentFBUser=function(){var a=this.context.state,c=a.pageID,d=a.requestID,e=a.refParam,f=a.refererUri;a=a.locale;c=b("XMNPlatformCustomerChatPluginOpenThreadController").getURIBuilder().setFBID("page_id",c).setString("ref",e).setString("referer_uri",f).setString("request_id",d).setString("locale",a).getRequest_LEGACY_UNTYPED(new(b("AsyncRequest"))());c.setAllowCrossPageTransition(!0).setMethod("POST").send();this.$12()};d.openThreadWithInterstitial=function(a){var c=this,d=this.context.state,e=d.pageID;d=d.requestID;new(b("PluginOptin"))("customer_chat").addLoginParams({logged_in:!0,page_id:e,request_id:d,switch_user:!1}).start();b("Arbiter").subscribeOnce(b("Plugin").CONNECT,function(){c.$12(),a!=null&&a()})};d.onContinueAsGuest=function(a){var c=this.context,d=c.state,e=c.dispatchAction,f=d.pageID,g=d.locale,h=d.requestID;b("CreateCustomerChatPluginGuestUserMutation").commit({input:{page_id:f,locale:g}},{onSuccess:function(c){var i,j,k;i=(i=c.create_customer_chat_plugin_guest_user)==null?void 0:i.session_key;j=(j=c.create_customer_chat_plugin_guest_user)==null?void 0:j.fbid;k=(k=c.create_customer_chat_plugin_guest_user)==null?void 0:k.access_token;c=(c=c.create_customer_chat_plugin_guest_user)==null?void 0:c.is_lightswitch_enabled;if(i!=null&&j!=null&&k!=null){i=b("MPNStorage").getFBStorageState();var l={path:b("MPNLocalState").MPNLocalStatePath.THREAD_VIEW,chatState:b("MPNLocalState").MPNChatState.GUEST_CHAT_STARTED,visibility:"not-hidden",showUpgradePrompt:b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN};if(i!=null){var m=Date.now()+b("LiveChatPluginConstants").GUEST_SESSION_STORAGE_VALIDITY_MS;b("MPNStorage").setFBStorageState(babelHelpers["extends"]({},i,{currentPath:l.path,chatState:l.chatState,userID:j,accessToken:k,expirationTimestamp:m,showUpgradePrompt:b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN}))}b("MPNIdentity").MPNIdentity.changeIdentityToGuest(j,k);e({type:"START_CHAT",optimisticStorageState:l,accessToken:k,guestID:j});c===!0&&b("ODS").bumpEntityKey(4205,"chat_plugin","chat_plugin.epd.guest_upgrade_entry_point_blocked_eu_guest");e({type:"UPDATE_IS_LIGHTSWITCH_ENABLED_FOR_GUEST",isLightswitchEnabledForGuest:c,showUpgradeUpsellPrompt:d.showUpgradeUpsellPrompt&&c!==!0});i=b("XMNPlatformCustomerChatPluginOpenThreadController").getURIBuilder().setFBID("page_id",f).setString("ref",d.refParam).setString("referer_uri",d.refererUri).setString("request_id",h).setString("access_token",k).setString("locale",g).getRequest_LEGACY_UNTYPED(new(b("AsyncRequest"))());i.setAllowCrossPageTransition(!0).setMethod("POST").send();a(j,k)}},onFailure:function(a){b("MPNStorage").clearFBStorageState(),b("MPNStorage").clearThirdPartyStorageState(),b("MPNXDMessageManager").reloadPlugin()}})};d.togglePluginVisibility=function(){if(this.context.state.optimisticStorageState.path==b("MPNLocalState").MPNLocalStatePath.BUBBLE){b("MPNNavigation").maximizePlugin(this.context,!1);return}this.context.state.optimisticStorageState.visibility==="not-hidden"?b("MPNNavigation").minimizePlugin(this.context,!1):this.context.state.optimisticStorageState.visibility==="hidden"&&b("MPNNavigation").maximizePlugin(this.context,!1)};return c}(h.Component);e.exports=a;a.contextType=b("MessagingPluginContext")}),null);
__d("MessagingPluginDesktopRoot",["cx","CometBlueBridgeKeyCommandListener.react","LiveChatPluginErrorBoundary.react","MPNCacheVersioning","MPNConstants","MPNDesktopWrapper.react","MPNIdentity","MPNLocalState","MPNStorage","MPNXDMessageManager","MessagingPluginPathUtils","MessagingPluginStateProvider","ODS","ReactDOM","URI","gkx","performanceAbsoluteNow","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||b("react");a=function(){function a(a){var b=a.alignment,c=a.pageID,d=a.container,e=a.serverTime,f=a.clientRequestTime,g=a.pagePassesSentryTest,h=a.hasMessagingPermission,i=a.isMuted,j=a.isPageBlocked,k=a.isBusinessActive,l=a.requestID,m=a.refererUri,n=a.originDomain,o=a.soundURLs,p=a.hasGuestMode,q=a.showUpgradeUpsellPrompt,r=a.hasAutomation,s=a.appSwitchUri,t=a.upgradeAppSwitchUri,u=a.storedStates,v=a.isComposerDisabled,w=a.hasPersistentMenu,x=a.pageName,y=a.pageProfilePictureUri,z=a.viewerProfilePicureUri,A=a.pageResponsiveness,B=a.isInstantlyResponsive,C=a.refParam,D=a.pageVerifiedStatus,E=a.greetingDialogDelay,F=a.greetingDialogDisplay,G=a.loggedInGreeting,H=a.loggedOutGreeting,I=a.threadCSSColor,J=a.locale,K=a.icebreakers,L=a.icebreakerCtas,M=a.bottomSpacing,N=a.isPageInEU,O=a.threadExists,P=a.uiPolishEnabled,Q=a.shouldShowWelcomeMessageBubble,R=a.shouldIconDelay;a=a.loggedInAccessToken;try{this.$1(b,c,d,e,f,g,h,i,j,k,l,m,n,o,s,t,p,q,r,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,a)}catch(a){}}var c=a.prototype;c.$1=function(a,c,d,e,f,g,h,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,aa,S,ba,ca){var T=this,U=!1;b("MPNStorage").initialize(q,c,o);b("MPNIdentity").MPNIdentity.hasStorageAccess(function(V){b("MPNIdentity").MPNIdentity.init(V);var W=o,X=x;X&&(b("MPNCacheVersioning").isLatestVersion(X.v)||(b("MPNStorage").clearThirdPartyStorageState(),X=null));X||(X=T.$2(I,H,S),b("MPNStorage").setThirdPartyStorageState(X));var da=!1,ea,fa,Y=X.visibility;if(V){var Z,$=b("MPNStorage").getFBStorageState();Z=(Z=$)==null?void 0:Z.rdr;Z==null&&!b("MPNCacheVersioning").isLatestVersion((Z=$)==null?void 0:Z.v)&&(b("MPNStorage").clearFBStorageState(),$=b("MPNStorage").getFBStorageState());b("MPNStorage").isAccessTokenExpired()&&(b("MPNStorage").clearFBStorageState(),X=T.$2(I,H,S),b("MPNStorage").setThirdPartyStorageState(X));if($!=null&&$.requestID!=null&&$.requestID!=""){Z=$.requestID;($.rdr==b("MPNConstants").MPNRedirect.NEW_GUEST_SESSION||$.rdr==b("MPNConstants").MPNRedirect.ITP_CONTINUE_SESSION)&&(W=Z,b("MPNStorage").initialize(q,c,Z))}U=b("MPNStorage").setInitialStateIfNecessary(!1,Y,I,c,S);$=b("MPNStorage").getFBStorageState();if($!=null){da=$.chatState!=b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED;ea=$.accessToken;fa=$.userID;Y=$.visibility;X=babelHelpers["extends"]({},X,{path:$.currentPath,chatState:$.chatState,visibility:$.visibility,showUpgradePrompt:(Z=$.showUpgradePrompt)!=null?Z:b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN});b("MPNStorage").setThirdPartyStorageState(X)}}$=T.$3(V,X);Y=="hidden"&&$!=b("MessagingPluginPathUtils").MPN_PATH.BUBBLE&&b("MPNXDMessageManager").updateAppearance(!0,!0,"false","false",null,a,$,!0);$===b("MessagingPluginPathUtils").MPN_PATH.BUBBLE&&b("MPNXDMessageManager").updateAppearance(!0,!1,"false","false",null,a,$,!0);b("MPNIdentity").MPNIdentity.subscribeLoggedInUserChanges(function(a,c){b("MPNIdentity").MPNIdentity.currentUserState()!=b("MPNIdentity").MPNIdentityState.GUEST&&(b("MPNStorage").clearFBStorageState(),b("MPNStorage").clearThirdPartyStorageState()),b("MPNXDMessageManager").reloadPlugin()});Z=v&&!Q;Z||v&&Q&&b("ODS").bumpEntityKey(4205,"chat_plugin","chat_plugin.epd.guest_upgrade_entry_point_blocked_eu_page");V={alignment:a,pageID:c,pageName:A,pagePassesSentryTest:g,hasMessagingPermission:h,isMuted:l,isPageBlocked:m,pageProfilePictureUri:B,viewerProfilePicureUri:C,threadCSSColor:L,pageResponsiveness:D,isInstantlyResponsive:E,isComposerDisabled:y,hasActiveAutomation:!1,hasPersistentMenu:z,greetingDialogDelay:H,greetingDialogDisplay:I,loggedInGreeting:J,loggedOutGreeting:K,refParam:F,refererUri:p,originDomain:q,appSwitchUri:s,upgradeAppSwitchUri:t,locale:M,isBusinessActive:n,icebreakers:N,icebreakerCtas:O,pageVerifiedStatus:G,initialRequestUri:(i||(i=b("URI"))).getRequestURI(),requestID:W,bottomSpacing:P,chatStarted:da,accessToken:ea,guestID:fa,optimisticStorageState:X,soundURLs:r,isInitialLoad:U,hasGuestMode:u,showUpgradeUpsellPrompt:Z,pluginMountTime:(j||(j=b("performanceAbsoluteNow")))(),serverTime:e,clientRequestTime:f,upgradeUpsellPrompt:b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN,messageCount:null,cookieAccessDenied:!1,hasAutomation:w&&!Q,isPageInEU:Q,threadExists:R,uiPolishEnabled:aa,shouldIconDelay:ba,isLightswitchEnabledForGuest:!1,loggedInAccessToken:ca};b("ReactDOM").render(k.jsx(b("LiveChatPluginErrorBoundary.react"),{pageID:c,children:k.jsx(b("CometBlueBridgeKeyCommandListener.react"),{children:k.jsx(b("MessagingPluginStateProvider"),{initialState:V,children:k.jsx("div",{className:"_95ry",children:k.jsx(b("MPNDesktopWrapper.react"),{path:$,redirectCommand:b("MPNStorage").getRedirectCommand()})})})})}),d)})};c.$2=function(a,c,d){if(d&&a==="hide"&&b("gkx")("1956404"))return{path:b("MPNLocalState").MPNLocalStatePath.BUBBLE,chatState:b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED,visibility:"not-hidden"};d=a==="hide"||a==="icon";c>0;return{path:b("MPNLocalState").MPNLocalStatePath.WELCOME_PAGE,chatState:b("MPNLocalState").MPNChatState.CHAT_NOT_STARTED,visibility:d?"hidden":"not-hidden",showUpgradePrompt:b("MPNConstants").MPNUpgradePrompt.NOT_SHOWN}};c.$3=function(a,c){var d=b("MessagingPluginPathUtils").MPN_PATH.WELCOME;if(a){a=b("MPNStorage").getFBStorageState();a!=null&&a.currentPath!=null?b("MPNIdentity").MPNIdentity.isITPUserAgent()&&a.currentPath===b("MPNLocalState").MPNLocalStatePath.BUBBLE?(d=b("MessagingPluginPathUtils").MPN_PATH.WELCOME,b("MPNXDMessageManager").storeThirdPartyState(b("MPNLocalState").MPNLocalStatePath.WELCOME_PAGE,a.chatState)):(d=b("MessagingPluginPathUtils").MessagingPluginPathUtils.toMobilePath(a.currentPath),b("MPNXDMessageManager").storeThirdPartyState(a.currentPath,a.chatState)):c!=null&&a==null&&b("MPNXDMessageManager").removeThirdPartyState()}else c!=null&&c.path!=null&&(d=b("MessagingPluginPathUtils").MessagingPluginPathUtils.toMobilePath(c.path)),d==b("MessagingPluginPathUtils").MPN_PATH.THREAD&&(d=b("MessagingPluginPathUtils").MPN_PATH.ITPCONTINUE);return d};return a}();e.exports=a}),null);